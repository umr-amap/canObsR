---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```
canObsR
================

  - [The package](#the-package)
  - [Citation](#citation)
  - [Install](#install)
  - [Documentation](#documentation)
  - [Generate orthomosaics](#generate-orthomosaics)

# The package

canObsR aims at streamlining, standardizing and facilitating processing of repetead UAV surveys from R. It focuses on RGB data. It notably allows generating 3D and 4D mosaics & mosaics spatial alignment using state-of-the-art approaches,  provides tools to generate reference labels, segment crowns (not now) and classify crown phenophases (not now).

# Citation

To cite 'canObsR', please use citation('canObsR').


# Installation

The installation of canObsR involves several steps that go beyond a typical R package. This is because the package acts as a bridge between different powerful tools used for processing imagery. Here's why:

Python integration: Some key processing steps rely on specialized Python libraries. To make this work seamlessly from R, we use the {reticulate} package, which requires setting up a Python environment via Miniconda. This allows us to run Python scripts directly from R functions.

Environment setup: We provide a .yml file to create a dedicated Python environment with all the required dependencies. This ensures that the Python code used in the package runs reliably, regardless of the user's system.

Metashape integration: Some image processing steps rely on Agisoft Metashape, a commercial software. To use these features, Metashape must be installed, and a valid license key must be activated.

Although the setup may seem complex at first, it ensures that once installed, all components work together smoothly to provide robust and reproducible results across platforms.

[The full installation process here](https://umr-amap.github.io/canObsR/articles/Complete-installation.html)


# Documentation

In addition to the usual R package documentation, we also have extensive docs and examples [here](https://umr-amap.github.io/canObsR/)



# Generate orthomosaics

One of the main functions of the package is to generate orthomosaics and to align them in R, using Metashape and [AROSICS](https://github.com/GFZ/arosics). To guide you step by step into the workflow, you should download the  [test dataset](https://zenodo.org/uploads/14748367?token=eyJhbGciOiJIUzUxMiJ9.eyJpZCI6ImVhNjBlZWM5LWYwZTEtNGUxNS04ZDRmLWI3MTAwZTdiMTdmNSIsImRhdGEiOnt9LCJyYW5kb20iOiIzYmViYTgxNWE2OGNlYTA1Zjc1YzdmMWUzZTdjZTVkMSJ9.pzx-dAnjJXNp34OIpqfibrHxZxSUSj8FvdLPGd6r4IaJSa5sAW-eme_EenQr0bLPUAjFGhKrZ-OqrVOQ7bLKBw) and follow [the article](https://umr-amap.github.io/canObsR/articles/generate-and-align-ortomosaics.html).

The generation of orthomosaics is based on Fabrice Vinatier & Denis Feurer's work, [Time-SIFT module for Agisoft Metashape software](https://doi.org/10.5281/zenodo.8367318) (2023)
```{r echo=FALSE, fig.show='hold',fig.align="center",fig.cap="Generate orthomosaics", message=FALSE, warning=FALSE, out.width='100%'}
knitr::include_graphics("man/figures/generate_mosaics.JPG")
```

